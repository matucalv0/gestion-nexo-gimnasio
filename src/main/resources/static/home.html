<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="icon" type="image/png" href="../assets/nexologo.png" />
  <title>NEXO · PANEL</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: {
              DEFAULT: '#FF6B2C',
              50: '#FFF4EF',
              100: '#FFE8DC',
              200: '#FFD1B9',
              300: '#FFBA96',
              400: '#FFA373',
              500: '#FF6B2C',
              600: '#E85A1F',
              700: '#C74A19',
              800: '#A63A14',
              900: '#852A0F',
            },
            secondary: {
              DEFAULT: '#00D9FF',
              500: '#00D9FF',
              600: '#00B8DB',
            },
            accent: {
              DEFAULT: '#A855F7',
              500: '#A855F7',
              600: '#9333EA',
            },
          },
          fontFamily: {
            sans: ['Inter', '-apple-system', 'BlinkMacSystemFont', 'sans-serif'],
          },
          boxShadow: {
            'glow-primary': '0 0 20px rgba(255, 107, 44, 0.3)',
            'glow-secondary': '0 0 20px rgba(0, 217, 255, 0.3)',
          },
        },
      },
    }
  </script>


  <!-- Google Fonts - Inter -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="../css/main.css">
  <link rel="stylesheet" href="../css/sidebar.css">
  <link rel="preload" as="image" href="../assets/nexofondo.jpg">
</head>

<body class="text-gray-100 min-h-screen font-sans selection:bg-[var(--orange)] selection:text-white">

  <main class="flex justify-center items-start min-h-screen p-6 pt-8">
    <div class="w-full max-w-7xl">

      <!-- HEADER -->
      <header class="page-header mb-6">
        <div class="page-header-icon">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="1.75" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round"
              d="M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25" />
          </svg>
        </div>
        <div class="page-header-content">
          <h1 class="page-header-title">Panel Principal</h1>
          <p class="page-header-subtitle">NEXO</p>
        </div>
      </header>


      <!-- DASHBOARD EJECUTIVO - KPIs Principales -->
      <section class="card-container mb-6">
        <h2 class="card-section-title mb-5">Resumen del día</h2>
        <div id="dashboardKpis" class="grid grid-cols-2 lg:grid-cols-4 gap-5">
          <!-- KPI: Recaudación HOY -->
          <div class="kpi-card">
            <p class="kpi-label">Recaudación HOY</p>
            <p id="kpiRecaudacionHoy" class="kpi-value text-green-400">$0</p>
            <p class="kpi-caption">Ingresos del día</p>
          </div>

          <!-- KPI: Socios Activos -->
          <div class="kpi-card">
            <p class="kpi-label">Socios activos HOY</p>
            <p id="kpiSociosActivos" class="kpi-value text-blue-400">0</p>
            <p class="kpi-caption">Con membresía vigente</p>
          </div>

          <!-- KPI: Por Vencer -->
          <div class="kpi-card kpi-card-warning cursor-pointer" id="kpiPorVencerCard">
            <p class="kpi-label">Por Vencer</p>
            <p id="kpiPorVencer" class="kpi-value text-yellow-400">0</p>
            <p class="kpi-caption">En los próximos 7 días</p>
          </div>

          <!-- KPI: Asistencias HOY -->
          <div class="kpi-card">
            <p class="kpi-label">Asistencias HOY</p>
            <p id="kpiAsistenciasHoy" class="kpi-value">0</p>
            <p class="kpi-caption">Ingresos registrados</p>
          </div>
        </div>
      </section>

      <!-- REGISTRO RÁPIDO DE ASISTENCIA -->
      <section class="card-container mb-6">
        <div class="flex items-center justify-between mb-4">
          <div class="flex items-center gap-2">
            <div class="flex items-center justify-center w-8 h-8 rounded-lg" style="background: rgba(233,86,30,0.12)">
              <svg class="w-4 h-4" style="color: var(--orange)" fill="none" stroke="currentColor" stroke-width="1.75"
                viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round"
                  d="M3.75 13.5l10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75z" />
              </svg>
            </div>
            <h2 class="text-sm font-semibold uppercase tracking-wider" style="color: var(--beige)">Registro rápido</h2>
          </div>
          <kbd class="text-xs px-2 py-0.5 rounded"
            style="background: rgba(107,114,128,0.2); color: #6b7280; font-family: monospace">F2</kbd>
        </div>

        <!-- Buscador inline -->
        <div class="relative mb-3">
          <div class="search-input-wrapper">
            <svg class="search-input-icon" fill="none" stroke="currentColor" stroke-width="1.75" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round"
                d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z" />
            </svg>
            <input type="text" id="inputAsistenciaRapida" placeholder="DNI o nombre del socio..." autocomplete="off"
              autofocus class="search-input" />
          </div>
          <!-- Dropdown resultados -->
          <div id="resultadosBusquedaHome" class="search-results hidden"></div>
        </div>

        <!-- Contenedor alertas inline -->
        <div id="alertContainerHome" class="mb-3"></div>

        <!-- Últimas asistencias de hoy -->
        <div class="recent-section">
          <div class="recent-header">
            <svg class="w-4 h-4 text-gray-500" fill="none" stroke="currentColor" stroke-width="1.75"
              viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
            <h3 class="recent-title">Últimas asistencias de hoy</h3>
          </div>
          <div id="listaUltimasAsistenciasHome" class="recent-list">
            <p class="text-gray-500 text-xs text-center py-2">Cargando...</p>
          </div>
        </div>
      </section>

      <!-- ATAJOS RÁPIDOS -->
      <section class="grid grid-cols-1 sm:grid-cols-2 gap-5 mb-6">
        <!-- Nuevo Socio -->
        <button id="quickSocio" class="quick-action-btn group">
          <div class="quick-action-icon">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="1.75" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round"
                d="M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z" />
            </svg>
          </div>
          <span class="quick-action-label">Nuevo Socio</span>
        </button>

        <!-- Nuevo Pago -->
        <button id="quickPago" class="quick-action-btn group">
          <div class="quick-action-icon">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="1.75" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round"
                d="M12 6v12m-3-2.818l.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
          </div>
          <span class="quick-action-label">Nuevo Pago</span>
          <kbd class="quick-action-kbd">F3</kbd>
        </button>
      </section>

      <!-- ALERTA SOCIOS INACTIVOS (compacta) -->
      <section id="seccionSociosInactivos" class="hidden mb-6">
        <details class="glass rounded-lg border-l-4 border-yellow-600 shadow-lg">
          <summary class="flex items-center gap-2 px-4 py-3 cursor-pointer hover:bg-white/5 transition rounded-lg">
            <span>⚠️</span>
            <span class="text-sm font-medium text-yellow-500">Socios inactivos (+7 días)</span>
            <span id="cantidadInactivos"
              class="bg-yellow-600 text-black text-xs px-2 py-0.5 rounded-full font-bold shadow-lg shadow-yellow-600/20">0</span>
          </summary>
          <ul id="listaInactivos" class="px-4 pb-3 pt-1 space-y-1 max-h-32 overflow-y-auto text-sm">
            <!-- dinámico -->
          </ul>
        </details>
      </section>

      <!-- CARDS DE NAVEGACIÓN - Módulos del Sistema -->
      <section class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-5">
        <!-- Card: Asistencias -->
        <a href="asistencias.html" class="nav-card group">
          <div class="nav-card-icon">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="1.75" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
          </div>
          <div class="nav-card-content">
            <h3 class="nav-card-title">Asistencias</h3>
            <p class="nav-card-desc">Registros diarios</p>
          </div>
          <svg class="nav-card-arrow" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5" />
          </svg>
        </a>

        <!-- Card: Socios -->
        <a href="socios.html" class="nav-card group">
          <div class="nav-card-icon">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="1.75" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round"
                d="M15 19.128a9.38 9.38 0 002.625.372 9.337 9.337 0 004.121-.952 4.125 4.125 0 00-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 018.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0111.964-3.07M12 6.375a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zm8.25 2.25a2.625 2.625 0 11-5.25 0 2.625 2.625 0 015.25 0z" />
            </svg>
          </div>
          <div class="nav-card-content">
            <h3 class="nav-card-title">Socios</h3>
            <p class="nav-card-desc">Gestión de miembros</p>
          </div>
          <svg class="nav-card-arrow" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5" />
          </svg>
        </a>

        <!-- Card: Pagos -->
        <a href="pagos.html" class="nav-card group">
          <div class="nav-card-icon">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="1.75" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round"
                d="M2.25 18.75a60.07 60.07 0 0115.797 2.101c.727.198 1.453-.342 1.453-1.096V18.75M3.75 4.5v.75A.75.75 0 013 6h-.75m0 0v-.375c0-.621.504-1.125 1.125-1.125H20.25M2.25 6v9m18-10.5v.75c0 .414.336.75.75.75h.75m-1.5-1.5h.375c.621 0 1.125.504 1.125 1.125v9.75c0 .621-.504 1.125-1.125 1.125h-.375m1.5-1.5H21a.75.75 0 00-.75.75v.75m0 0H3.75m0 0h-.375a1.125 1.125 0 01-1.125-1.125V15m1.5 1.5v-.75A.75.75 0 003 15h-.75M15 10.5a3 3 0 11-6 0 3 3 0 016 0zm3 0h.008v.008H18V10.5zm-12 0h.008v.008H6V10.5z" />
            </svg>
          </div>
          <div class="nav-card-content">
            <h3 class="nav-card-title">Pagos</h3>
            <p class="nav-card-desc">Ingresos y cuotas</p>
          </div>
          <svg class="nav-card-arrow" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5" />
          </svg>
        </a>

        <!-- Card: Finanzas -->
        <a href="finanzas.html" class="nav-card group">
          <div class="nav-card-icon">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="1.75" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round"
                d="M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 013 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V4.125z" />
            </svg>
          </div>
          <div class="nav-card-content">
            <h3 class="nav-card-title">Finanzas</h3>
            <p class="nav-card-desc">Balance y métricas</p>
          </div>
          <svg class="nav-card-arrow" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5" />
          </svg>
        </a>

        <!-- Card: Rutinas -->
        <a href="rutinas.html" class="nav-card group">
          <div class="nav-card-icon">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="1.75" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round"
                d="M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z" />
            </svg>
          </div>
          <div class="nav-card-content">
            <h3 class="nav-card-title">Rutinas</h3>
            <p class="nav-card-desc">Planes de entrenamiento</p>
          </div>
          <svg class="nav-card-arrow" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5" />
          </svg>
        </a>

        <!-- Card: Ejercicios -->
        <a href="ejercicios.html" class="nav-card group">
          <div class="nav-card-icon">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="1.75" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round"
                d="M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.348a1.125 1.125 0 010 1.971l-11.54 6.347a1.125 1.125 0 01-1.667-.985V5.653z" />
            </svg>
          </div>
          <div class="nav-card-content">
            <h3 class="nav-card-title">Ejercicios</h3>
            <p class="nav-card-desc">Catálogo y videos</p>
          </div>
          <svg class="nav-card-arrow" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5" />
          </svg>
        </a>

        <!-- Card: Productos -->
        <a href="productos.html" class="nav-card group">
          <div class="nav-card-icon">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="1.75" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round"
                d="M20.25 7.5l-.625 10.632a2.25 2.25 0 01-2.247 2.118H6.622a2.25 2.25 0 01-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125z" />
            </svg>
          </div>
          <div class="nav-card-content">
            <h3 class="nav-card-title">Productos</h3>
            <p class="nav-card-desc">Inventario y ventas</p>
          </div>
          <svg class="nav-card-arrow" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5" />
          </svg>
        </a>

        <!-- Card: Membresías -->
        <a href="membresias.html" class="nav-card group">
          <div class="nav-card-icon">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="1.75" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round"
                d="M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3m-3.75 3h15a2.25 2.25 0 002.25-2.25V6.75A2.25 2.25 0 0019.5 4.5h-15a2.25 2.25 0 00-2.25 2.25v10.5A2.25 2.25 0 004.5 19.5z" />
            </svg>
          </div>
          <div class="nav-card-content">
            <h3 class="nav-card-title">Membresías</h3>
            <p class="nav-card-desc">Planes disponibles</p>
          </div>
          <svg class="nav-card-arrow" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5" />
          </svg>
        </a>
      </section>

    </div>
  </main>

  <!-- MODAL: Socios por vencer -->
  <div id="modalPorVencer" class="modal hidden">
    ...
  </div>

  <!-- MODAL: Asistencia Exitosa (Info Socio) -->
  <div id="modalAsistenciaExito" class="modal hidden">
    <div class="modal-backdrop"></div>
    <div class="modal-content max-w-lg relative">
      <button id="cerrarModalExito" class="absolute top-4 right-4 text-gray-400 hover:text-white transition">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="1.75" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
        </svg>
      </button>

      <div class="text-center mb-4">
        <div class="inline-flex items-center justify-center w-12 h-12 rounded-full bg-green-500/20 text-green-400 mb-2">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7" />
          </svg>
        </div>
        <h3 class="modal-title text-green-400">¡Asistencia registrada!</h3>
      </div>

      <!-- Info socio (Replicado de asistencia.html) -->
      <div id="homeInfoSocio" class="info-card mb-3"></div>
      <div id="homeInfoMembresia" class="info-card"></div>
    </div>
  </div>


  <script type="module" src="js/pages/home.js"></script>
  <script src="../js/ui/sidebar.js"></script>
</body>

</html>